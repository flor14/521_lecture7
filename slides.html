<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>DSCI 521 - Lecture 7</title>
    <meta charset="utf-8" />
    <meta name="author" content="MDS 2021/22" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <script src="libs/js-cookie/js.cookie.js"></script>
    <script src="libs/peerjs/peerjs.min.js"></script>
    <script src="libs/tiny.toast/toast.min.js"></script>
    <link href="libs/xaringanExtra-broadcast/broadcast.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-broadcast/broadcast.js"></script>
    <script src="libs/clipboard/clipboard.min.js"></script>
    <link href="libs/shareon/shareon.min.css" rel="stylesheet" />
    <script src="libs/shareon/shareon.min.js"></script>
    <link href="libs/xaringanExtra-shareagain/shareagain.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-shareagain/shareagain.js"></script>
    <link href="libs/tachyons/tachyons.min.css" rel="stylesheet" />
    <script src="libs/xaringanExtra_fit-screen/fit-screen.js"></script>
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">











class: middle, center

&lt;img src="img/hex.png" width="150" style="display: block; margin: auto;" /&gt;


---


class: bottom

.bg-washed-blue.b--dark-blue.ba.bw2.br3.shadow-5.ph4.mt5[
### DSCI 521 - Lecture 7
### **SSH, filenames, and project organization**

 .large[#### Computing Platforms for Data Science - UBC MDS 2021/22
]]


---

## Lecture learning goals

1. Authenticate on GitHub using **SSH**.

--

2. **Name files** in a human and machine readable manner.

--

3. **Organize projects** with a meaningful folder hierarchy.

---

class: middle, inverse, center

## Set up keys for SSH for use with GitHub

---
class: middle, inverse

### To start, let's compare

#### Password-based authentication
#### SSH key-based authentication



---
### Password-based authentication

Passwords are short and tend to be somewhat easy to "break".

--
- Say your **password** contains 12 characters    

--
- Each character:  
  - 26 uppercase letters  
  - 26 lowercase letters  
  - 10 digits  
  - ~10 special characters    

--
- around ~70 possibilities per character, so `\(70^{12}\approx 10^{22}\)`    

--
- This is a **HUGE number** (except that there are patterns within passwords that make them easier to guess!)


.footnote[More on security and privacy in future courses]

---

&lt;img src="slides_files/figure-html/ghtw-1.png" width="450" style="display: block; margin: auto;" /&gt;


.footnote[[Tweet](https://twitter.com/github/status/1425185352562663424?s=20)]

---

### SSH key-based authentication 

**Secure SHell (SSH)**  a common method for **remote login** to another computer which is secure.

--

&lt;img src="img/client-server.png" width="400" style="display: block; margin: auto;" /&gt;

--

- **server** a machine you are SSHing into.   


--

- **client** usually your machine.  

---

### SSH key-based authentication

We use `ssh-keygen` to generate **a pair of keys** (_2 special files with longs strings of characters_) in your computer.

--



.pull-left[

1. **private key**   
_stored only on your computer_  
CAN decrypt messages generated by the public key  

2. **public key**   
_shared with services like GitHub_ 

]

--

.pull-right[

&lt;img src="img/pair.png" width="200" style="display: block; margin: auto;" /&gt;


]




---

### Understanding public key / private key concepts

&lt;img src="img/keys.png" width="350" style="display: block; margin: auto;" /&gt;



**Public key (.pub)**

- A padlock that you can make copies of and put anywhere you want.

   
- By default, the filenames of the public keys are one of the following:

```
    id_rsa.pub     id_ecdsa.pub      id_ed25519.pub
```




.footnote[[Checking for existing SSH keys](https://docs.github.com/en/enterprise-server@2.22/authentication/connecting-to-github-with-ssh/checking-for-existing-ssh-keys)]  
---

### Understanding public key / private key concepts

&lt;img src="img/keys.png" width="300" style="display: block; margin: auto;" /&gt;

 **Private key**

- It can open the padlock (public key) that is stored on the other machine.


---
### You can put your lock at many places
As long as you are using the same lock (public key), you will be able to open it with the same private key.

&lt;img src="img/lock.png" width="400" style="display: block; margin: auto;" /&gt;

---

### How the lock works

The Server uses the public key to encrypt a challenge message to you
&lt;img src="img/conexion0.png" width="455" style="display: block; margin: auto;" /&gt;

---

### How the lock works


You need to show that you can decrypt the message to demonstrate that you are in possesion of the associated private key

&lt;img src="img/conexion.png" width="455" style="display: block; margin: auto;" /&gt;
---

## Keeping your private key safe

#### **ssh-keygen** allows you to put a **password or passphrase** on the private key

##### üö®‚ö†Ô∏è this should be shared with NO ONE! ‚ö†Ô∏èüö®

- if your private key does fall into the wrong hands, the person must still know the password or passphrase to use the private key



---


## Why SSH keys over passwords
#### SSH keys use the RSA cryptosystem

* The private key is much longer than a password. 
* This makes it harder for a hacker to break (guess) the password. 


&lt;img src="img/samantha-lam-zFy6fOPZEu0-unsplash.jpg" width="300" style="display: block; margin: auto;" /&gt;

---

## Authentication vs. encryption

#### Authentication
- The system described above is purely for authentication
- The **client** needs to prove to the **server** that  it is authorized to access the server
- Someone with authority has put the public key in `~/.ssh/authorized_keys` on the server
- The server now grants access to anyone possessing a private key matching one of these public keys

--

#### **Encryption** of the data flowing between the client and server.
- Prevents eavesdroppers from listening to client-server communications


---

## GitHub

#### 1. [Creating a SSH key](https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent)

#### 2. [Adding your SSH key to the ssh-agent](https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent)

The ssh-agent is a helper program that keeps track of user's identity keys and their passphrases. The agent can then use the keys to log into other servers without having the user type in a password or passphrase again. 

#### 3. [Adding a new SSH key to your GitHub account](https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account)

#### 4. [Testing your SSH connection](https://docs.github.com/en/authentication/connecting-to-github-with-ssh/testing-your-ssh-connection#)

.footnote[[ssh-agent / ssh.com](https://www.ssh.com/academy/ssh/agent)]


---


class: inverse, center, middle
# Filenames

### best practices

---

## What works, what doesn't?




myabstract.docx  
Joe‚Äôs Filenames Use Spaces and Punctuation.xlsx  
figure 1.png 
fig 2.png  
JW7d^(2sl@deletethisandyourcareerisoverWx2*.txt


--


2014-06-08_abstract-for-sla.docx    
joes-filenames-are-getting-better.xlsx    
fig01_talk-scatterplot-length-vs-interest.png    
fig02_talk-histogram-attendance.png    
1986-01-28_raw-data-from-challenger-o-rings.txt    


---

## What works, what doesn't?

#### NO

myabstract.docx  
Joe‚Äôs Filenames Use Spaces and Punctuation.xlsx  
figure 1.png 
fig 2.png  
JW7d^(2sl@deletethisandyourcareerisoverWx2*.txt


--

#### YES!

2014-06-08_abstract-for-sla.docx    
joes-filenames-are-getting-better.xlsx    
fig01_talk-scatterplot-length-vs-interest.png    
fig02_talk-histogram-attendance.png    
1986-01-28_raw-data-from-challenger-o-rings.txt    


---

## Three principles for (file) names

1. Machine readable

2. Human readable

3. Plays well with default ordering

---

## Awesome file names :)

&lt;img src="img/awesome_names.png" width="700" style="display: block; margin: auto;" /&gt;

---

class: inverse, center, middle

## Machine Readable


---

## Machine Readable


.pull-left[
**Regular expression and [globbing](https://glosario.carpentries.org/en/#globbing) friendly**  

Avoid: 
- spaces
- punctuation
- accented characters
- case sensitivity (different files named `foo` and `Foo`)
  
**Easy to compute on**

 - Deliberate use of delimiters

]

.pull-right[

&lt;img src="img/rock-n-roll-monkey-FTfjMijq-Ws-unsplash.jpg" width="700" style="display: block; margin: auto;" /&gt;

]


---

class: middle 
### globbing
In Unix, the term ‚Äúglobbing‚Äù means ‚Äúmatching a set of files with a pattern‚Äù  
Could be consider a simplified form of regular expressions.   

--
Example: 
`*.dat` means ‚Äúall files whose names end in `.dat`‚Äù.

```bash
ls *.dat

```
--
`*`(globbing) = `.*` (regex)

#### For this course we only will learn * (asterisk) for globbing

.footnote[[The Carpentries glosario](https://glosario.carpentries.org/en/#globbing)]
---

### Globbing
##### Excerpt of complete file listing:
&lt;img src="img/globbing1.png" width="700" style="display: block; margin: auto;" /&gt;


---
### Globbing
##### Example of globbing to narrow file listing:


&lt;img src="img/plasmid_glob.png" width="700" style="display: block; margin: auto;" /&gt;

---

### Recovery of meta-data from the filenames 

#### Deliberate use of **-** and **_** allows recovery of meta-data from the filenames:

 **_** (underscore) used to delimit units of meta-data I want later  
 **-** (hyphen) used to delimit words so my eyes don't bleed

&lt;img src="img/plasmid_delimiters.png" width="700" style="display: block; margin: auto;" /&gt;
---
class: inverse, middle
### Recap: machine readable
 Easy to search for files later

 Easy to narrow file lists based on names

 Easy to extract info from file names, e.g. by splitting


---

## Human readable


.pull-left[
Name contains info on content

Connects to concept of a slug from semantic URLs

]

.pull-right[
&lt;img src="img/sincerely-media-c1YrcFYW66s-unsplash.jpg" width="500" style="display: block; margin: auto;" /&gt;

]

---
###Which set of file(name)s do you want at 3 a.m. before a deadline?

&lt;img src="img/human_readable_not_options.png" width="700" style="display: block; margin: auto;" /&gt;
---

###Embrace the slug
slug filenames `![](img/slug_filenames.png)` slug `![](img/slug.jpg)`


Semantic URLs use words with inherent meaning that can be understood by anyone, regardless of their technical know-how

.footnote[https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_is_a_URL]
---

class: inverse, middle

## Recap: Human readable
Easy to figure out what something is, based on its name



---

## Plays well with default ordering
.pull-left[- Put something numeric first
- Use the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) standard for dates
- Left pad other numbers with zeros]
.pull-right[

&lt;img src="img/brett-jordan-M3cxjDNiLlQ-unsplash.jpg" width="700" style="display: block; margin: auto;" /&gt;

]



---

## Examples
Chronological order:

&lt;img src="img/chronological_order.png" width="700" style="display: block; margin: auto;" /&gt;

---

logical order:

&lt;img src="img/logical_order.png" width="700" style="display: block; margin: auto;" /&gt;


---

## Dates
Use the ISO 8601 standard for dates: YYYY-MM-DD

&lt;img src="img/dates_order.png" width="700" style="display: block; margin: auto;" /&gt;


.footnote[[ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html)]

---

### Left pad other numbers with zeros


If you don‚Äôt left pad, you get this:
```
10_final-figs-for-publication.R
1_data-cleaning.R
2_fit-model.R
```
which is just sad **:(**
--

```
01_data-cleaning.R
02_fit-model.R
10_final-figs-for-publication.R
```

Better **:)**
---

class: inverse, middle

### Recap: Plays well with default ordering
 Put something numeric first

 Use the ISO 8601 standard for dates

 Left pad other numbers with zeros

---

### Recap: Three principles for (file) names
- Machine readable

- Human readable

- Plays well with default ordering

---

class: inverse, center, middle

## .gitignore

---

### Tell Git to ignore irrelevant files using a .gitignore file

You may have encountered this before:

```bash
git status
On branch timberst-master
Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)

    .ipynb_checkpoints/
    
no changes added to commit (use "git add" and/or "git commit -a")
```

Git is letting us know about untracked files (ones we have never committed before). We don't care about these files.  What do we do?

---

### Create a .gitignore file

Create a file called `.gitignore` inside your Git repo. To do this with VS Code, I would type:

```bash
code .gitignore
```
Inside the text file, list the files and folders you would like to ignore, one per line. For example:

```bash
.ipynb_checkpoints/
```
Save the file, and add and commit it with Git. 


.footnote[[.gitignore](https://carpentries-incubator.github.io/git-Rstudio-course/02-ignore/index.html)]
  
---

### .gitignore tips and tricks

- append `**/ `to the beginning of any file/folder names listed in the `.gitignore` file to have them ignored in subdirectories within the repo as well  

--

- create a global `.gitignore` file so that you do not have to create the same .gitignore for all your homework repos
  
---
class: center, middle, inverse

## Project Organization


---

### Project organization

A good project structure looks similar to this:

```bash
project/          
‚îú‚îÄ‚îÄ data/              *.csv        
‚îÇ   ‚îú‚îÄ‚îÄ processed/
‚îÇ   ‚îî‚îÄ‚îÄ raw/     
‚îú‚îÄ‚îÄ reports/           *.ipynb *.Rmd
‚îú‚îÄ‚îÄ src/               *.py *.R
‚îú‚îÄ‚îÄ doc/               *.md
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ environment.yaml (or renv.lock)
```

- **Raw data** If you do not save it, you can‚Äôt go back to the start of an analysis

- You can have a **README.md** file inside each folder

.footnote[[Raw Data - DataCarpentries Incubator](https://carpentries-incubator.github.io/life-sciences-workshop/04-data-management-raw-data/index.html)]


---

### Project organization

A good project structure looks similar to this:  

```bash
project/          
‚îú‚îÄ‚îÄ data/              *.csv        
‚îÇ   ‚îú‚îÄ‚îÄ processed/
‚îÇ   ‚îî‚îÄ‚îÄ raw/     
‚îú‚îÄ‚îÄ reports/           *.ipynb *.Rmd
‚îú‚îÄ‚îÄ src/               *.py *.R
‚îú‚îÄ‚îÄ doc/               *.md
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ environment.yaml (or renv.lock)
```

**scr** can differ slightly between projects 

- R the src directory is often just called R/
- whereas for Python is has the same name as the project (project). 

**environment file.yaml (or renv.lock)**
Environments


---
## References

.bg-washed-blue.b--dark-blue.ba.bw2.br3.shadow-5.ph4.mt5[

 [Collection of useful gitgnore patterns](https://github.com/github/gitignore)
 
 [ISO 8601 standar for dates](https://www.iso.org/iso-8601-date-and-time-format.html)
 
 [Creating a SSH key - GitHub Docs](https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent)
 
 



]


---


class: inverse, middle, center


## Thank you!
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="https://platform.twitter.com/widgets.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
