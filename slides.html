<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>DSCI 521 - Lecture 7</title>
    <meta charset="utf-8" />
    <meta name="author" content="MDS 2021/22" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <script src="libs/js-cookie/js.cookie.js"></script>
    <script src="libs/peerjs/peerjs.min.js"></script>
    <script src="libs/tiny.toast/toast.min.js"></script>
    <link href="libs/xaringanExtra-broadcast/broadcast.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-broadcast/broadcast.js"></script>
    <script src="libs/clipboard/clipboard.min.js"></script>
    <link href="libs/shareon/shareon.min.css" rel="stylesheet" />
    <script src="libs/shareon/shareon.min.js"></script>
    <link href="libs/xaringanExtra-shareagain/shareagain.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-shareagain/shareagain.js"></script>
    <link href="libs/tachyons/tachyons.min.css" rel="stylesheet" />
    <script src="libs/xaringanExtra_fit-screen/fit-screen.js"></script>
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">











class: middle, center

&lt;img src="img/hex.png" width="150" style="display: block; margin: auto;" /&gt;


---


class: bottom

.bg-washed-blue.b--dark-blue.ba.bw2.br3.shadow-5.ph4.mt5[
### DSCI 521 - Lecture 7
### **SSH, filenames, and project organization**

 .large[#### Computing Platforms for Data Science - UBC MDS 2021/22
]]


---

## Lecture learning goals

1. Authenticate on GitHub using SSH.

--

2. Name files in a human and machine readable manner.

--

3. Organize projects with a meaningful folder hierarchy.
---

class: middle, inverse

## Set up keys for SSH for use with GitHub



---

## Remotely accessing another computer using SSH
Let's start with some definitions:


**Secure SHell (SSH)**  a common method for remote login to another computer which is secure.

--

**server** - a machine you are SSHing into. The server sits and waits to be contacted.

--

**client** - usually your machine. The client initiates contact with the server.


---

## Review - password-based authentication
Passwords are short and tend to be somewhat easy to "break" (guess).
- Say your password contains 12 characters
- each character is one of 26 uppercase letters, 26 lowercase letters, 10 digits, or ~10 special characters
- total probably around ~70 possibilities per character, so `\(70^{12}\approx 10^{22}\)`
- This is a HUGE number, except that there are patterns within passwords that make them easier to guess
More on security and privacy in future courses

---

## SSH key-based authentication
Two components:

1. public key
2. private key


--

These files have an asymmetrical relationship:

- the **public key** CANNOT decrypt messages generated by the private key
- the **private key** CAN decrypt messages generated by the public key

---

## Understanding public key private key concepts

--

- **Public key**

   - A padlock that you can make copies of and put anywhere you want.

   - To put your ‘padlock’ on an another machine, you would copy it to authorized_keys in the `~/.ssh` folder.

--

- **Private key**

It can open the padlock that is stored on the other machine.



&lt;img src="img/keys.png" width="500" style="display: block; margin: auto;" /&gt;
---



## How the lock works

- Keys are generated using `ssh-keygen`, to make:
  - private key (usually called `id_rsa`) 
  - public key (usually called `id_rsa.pub`)
  
- You can make copies of `id_rsa.pub` (public key/padlock) and distribute them to other machines
- The other machine uses the public key to encrypt a challenge message to you
- You need to show that you can decrypt the message to demonstrate that you are in possesion of the associated private key

---
## You can put your lock at many places
As long as you are using the same lock (public key), you will be able to open it with the same private key.

&lt;img src="img/lock.png" width="700" style="display: block; margin: auto;" /&gt;


.footnote[source: http://blakesmith.me/2010/02/08/understanding-public-key-private-key-concepts.html]
---

## Keeping your private key safe
ssh-keygen allows you to put a password or passphrase on the private key
this should be shared with NO ONE!
if your private key does fall into the wrong hands, the person must still know the password or passphrase to use the private key

&lt;img src="img/password_strength.png" width="700" style="display: block; margin: auto;" /&gt;


.footnote[source - https://xkcd.com/936/]


---


## Why SSH keys over passwords
SSH keys use the RSA cryptosystem

The private key is much longer than a password. A standard now is 4096-bit keys, which means `\(&amp;gt; 10^{1200}\)` possibilities. 
This makes it harder for a hacker to break (guess) the password. More on this when we discuss binary numbers next week.

Aside: Quantum computers will be able to break RSA encryption. It is very hard to predict whether this is years or decades away.

---

## Authentication vs. encryption
The system described above is purely for authentication

The client needs to prove to the server that the client is authorized to access the server
Someone with authority has put the public key in `~/.ssh/authorized_keys` on the server
---

## Authentication vs. encryption
The server now grants access to anyone possessing a private key matching one of these public keys
This is separate from encryption of the data flowing between the client and server.

This prevents eavesdroppers from listening to client-server communications

---


class: inverse, center, middle
# Filenames

### best practices

---

## What works, what doesn't?

.bg-washed-blue.b--dark-blue.ba.bw2.br3.shadow-5.ph4.mt5[
myabstract.docx  
Joe’s Filenames Use Spaces and Punctuation.xlsx  
figure 1.png 
fig 2.png  
JW7d^(2sl@deletethisandyourcareerisoverWx2*.txt
]

--

.bg-washed-blue.b--dark-blue.ba.bw2.br3.shadow-5.ph4.mt5[
2014-06-08_abstract-for-sla.docx    
joes-filenames-are-getting-better.xlsx    
fig01_talk-scatterplot-length-vs-interest.png    
fig02_talk-histogram-attendance.png    
1986-01-28_raw-data-from-challenger-o-rings.txt    
]

---

## What works, what doesn't?


.bg-washed-blue.b--dark-blue.ba.bw2.br3.shadow-5.ph4.mt5[
myabstract.docx  
Joe’s Filenames Use Spaces and Punctuation.xlsx  
figure 1.png 
fig 2.png  
JW7d^(2sl@deletethisandyourcareerisoverWx2*.txt
]

--


.bg-washed-blue.b--dark-blue.ba.bw2.br3.shadow-5.ph4.mt5[
2014-06-08_abstract-for-sla.docx    
joes-filenames-are-getting-better.xlsx    
fig01_talk-scatterplot-length-vs-interest.png    
fig02_talk-histogram-attendance.png    
1986-01-28_raw-data-from-challenger-o-rings.txt    
]

---

## Three principles for (file) names

- Machine readable

- Human readable

- Plays well with default ordering

---

## Awesome file names :)

&lt;img src="img/awesome_names.png" width="700" style="display: block; margin: auto;" /&gt;

---

class: inverse, center, middle

## Machine Readable


---

## Machine Readable

- Regular expression and [globbing](https://glosario.carpentries.org/en/#globbing) friendly
  - Avoid spaces, punctuation, accented characters, case sensitivity
--

- Easy to compute on

 - Deliberate use of delimiters



globbing: To specify a set of filenames using a simplified form of 
regular expressions, such as *.dat to mean “all files whose names end in .dat”.
The name is derived from “global”.

---


## Example of globbing to narrow file listing:


&lt;img src="img/plasmid_glob.png" width="700" style="display: block; margin: auto;" /&gt;

---

Same using Mac OS Finder search facilities
Same using regex in R
Punctuation {.smaller}
Deliberate use of "-" and "_" allows recovery of meta-data from the filenames:

"_" underscore used to delimit units of meta-data I want later
"-" hyphen used to delimit words so my eyes don't bleed


---

### Recap: machine readable
- Easy to search for files later

- Easy to narrow file lists based on names

- Easy to extract info from file names, e.g. by splitting

---

##### New to regular expressions and globbing? be kind to yourself and avoid

Spaces in file names
Punctuation
Accented characters
Different files named foo and Foo

---

## Human readable
Name contains info on content

Connects to concept of a slug from semantic URLs



##### Example
Which set of file(name)s do you want at 3 a.m. before a deadline?
Examples
Chronological order:


---

###Embrace the slug
slug filenames ![](img/slug_filenames.png) slug ![](img/slug.jpg)
####Recap: Human readable
Easy to figure out what the heck something is, based on its name



---

## Plays well with default ordering
Plays well with default ordering
Put something numeric first

Use the ISO 8601 standard for dates

Left pad other numbers with zeros

---

## Examples
Chronological order:

&lt;img src="img/chronological_order.png" width="700" style="display: block; margin: auto;" /&gt;

---

logical order:

&lt;img src="img/logical_order.png" width="700" style="display: block; margin: auto;" /&gt;


---

Dates
Use the ISO 8601 standard for dates: YYYY-MM-DD

&lt;img src="img/dates_order.png" width="700" style="display: block; margin: auto;" /&gt;

---

## Comprehensive map of all countries in the world that use the MM-DD-YYYY format


From https://twitter.com/donohoe/status/597876118688026624.


---

### Left pad other numbers with zeros


If you don’t left pad, you get this:

10_final-figs-for-publication.R
1_data-cleaning.R
2_fit-model.R
which is just sad :(


---

### Recap: Plays well with default ordering
- Put something numeric first

- Use the ISO 8601 standard for dates

- Left pad other numbers with zeros

### Recap: Three principles for (file) names
- Machine readable

- Human readable

- Plays well with default ordering

---

## Tell Git to ignore irrelevant files using a .gitignore file

You may have encountered this before:

git status
On branch timberst-master
Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)

    .ipynb_checkpoints/
    .DS_Store

no changes added to commit (use "git add" and/or "git commit -a")
Git is letting us know about untracked files (ones we have never committed before). We don't care about these files. We'd prefer not to have them clutter our view (so we can pay attention to files we do want to track). What do we do?

---

### Create a .gitignore file
Using the plain text editor of your choice (mine is VS Code) create a file called .gitignore inside your Git repo. To do this with VS Code, I would type:
```
code .gitignore
```
Inside the text file, list the files and folders you would like to ignore, one per line. For example:
```
.ipynb_checkpoints/
.DS_Store
```
Save the file, and add and commit it with Git. Then try git status again. You should see:
```
On branch timberst-master
nothing to commit, working tree clean
```

---


### .gitignore tips and tricks
append **/ to the beginning of any file/folder names listed in the .gitignore file to have them ignored in subdirectories within the repo as well
create a global `.gitignore` file so that you do not have to create the same .gitignore for all your homework repos
Let's create a gitignore file in our 521 lab 2 repo.

#### Steps to follow:
1. Use a text editor (e.g., VS Code, nano, Jupyter) to create a file called .gitignore in your 521 lab 2 repo
2. Add `**/.ipynb_checkpoints/` to that file and save it
3. `add` and `commit` `it with Git
4. Type `git status` and see if you no longer see .ipynb_checkpoints/ as a untracked file

---

### Project organization¶
A good project structure looks similar to this:
```
project/          
├── data/              *.csv        
│   ├── processed/
│   └── raw/     
├── reports/           *.ipynb *.Rmd
├── src/               *.py *.R
├── doc/               *.md
├── README.md
└── environment.yaml (or renv.lock)
```
This can differ slightly between projects and for R the src directory is often just called R/, whereas for Python is has the same name as the project (project). You will learn more about project hierarchy when making packages.


---

## References

.bg-washed-blue.b--dark-blue.ba.bw2.br3.shadow-5.ph4.mt5[

 [Elegant, flexible, and fast dynamic report generation with R](https://yihui.org/knitr/)
 
 [GitHub repo `here` package](https://github.com/jennybc/here_here)
 
 [GitHub repo `xaringan` package](https://github.com/yihui/xaringan)
 
 [GitHub repo `xaringanthemer` package](https://pkg.garrickadenbuie.com/xaringanthemer/)

 [R Markdown documents](https://rmarkdown.rstudio.com/)

 [R Markdown: The Definitive Guide](https://bookdown.org/yihui/rmarkdown/)
 
 [RStudio oficial - Distill for RMarkdown](https://rstudio.github.io/distill)


]


---


class: inverse, middle, center


## Thank you!
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="https://platform.twitter.com/widgets.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
